<!DOCTYPE html>
<html>
<head>
    <title>Just-in-time Initialization</title>
    <meta charset=utf-8 />
    <link href="Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="Content/jquery-ui.min.css" rel="stylesheet" type="text/css" />
    <link href="Content/toastr.min.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        input.glowing:focus {
            outline:none;
            border-color: #aa0000;
            box-shadow: 0 0 10px #aa0000;
        }
    </style>
    <script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui.min.js" type="text/javascript"></script>
    <script src="js/toastr.min.js" type="text/javascript"></script>   
    <script>
        //mock patch
        var _dataPicker = $.fn.datepicker; //backup the original
        $.fn.datepicker = function (options) {
            var that = this;
            this.each(function () {
                toastr.success("Initialized", "DatePicker");
                _dataPicker.apply(that, [options]);
            });
        };

        //when datepicker picked first time, will add class hasDatepicker, 
        //next time come back focus the same element, input.date:not(.hasDatepicker) will not be true, 
        //One time Initialization technique - so only run once when needed
        $(document).on("focus", "input.date:not(.hasDatepicker)", function () {
            $(this).datepicker();
        });
    </script>    
</head>
<body>
    <form class="form-horizontal well">
        <fieldset>
            <div class="control-group">
                <label class="control-label" for="firstName">First Name</label>
                <div class="controls">
                    <input id="firstName" type="text" class="input-xlarge" />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="lastName">Last Name</label>
                <div class="controls">
                    <input id="lastName" type="text" class="input-xlarge" />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="birthday">Birthday</label>
                <div class="controls">
                    <input id="birthday" type="text" class="input-xlarge date" />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="anniversary">Anniversary</label>
                <div class="controls">
                    <input id="anniversary" type="text" class="input-xlarge date" />
                </div>
            </div>
            <div class="form-actions">
                <input type="submit" class="btn btn-primary" value="Save"/>
                <input class="btn" value="Cancel"/>
            </div>
        </fieldset>    
    </form>    
</body>
</html>