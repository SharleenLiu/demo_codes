<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>jQuery Knob demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="jQuery Knob demo" />
                <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
                    
   
    <script src="js/jQueryRotateCompressed.2.2.js"></script>
    <script src="js/spritespin.js" type="text/javascript"></script>
   
     <link rel="stylesheet" href="css/reset.css">

        <link href="css/style.css" rel="stylesheet">
             
</head>
<body class='layout-document'>
   
   <script>
       window.updateFrame = function (f) {
           trace("frame", f);
           rotateKnob(parseInt(f * 360 / 34));
       }
       function trace() {
           var t = ""
           for (var i = 0; i < arguments.length; i++) {
               t += arguments[i] + "  ";
           }
          // console.log("v4: "+t);
       }
       var isDown = false
       function rotateKnob(Degrees) {
           if ($.browser.msie && parseInt($.browser.version, 10) < 9) {

               $("#rotate").rotate({ angle: (Degrees) });

           } else {

               $("#rotate").css({ 'transform': 'rotate(' + (Degrees) + 'deg)', '-webkit-transform': 'rotate(' + (Degrees) + 'deg)', '-o-transform': 'rotate(' + (Degrees) + 'deg)', '-moz-transform': 'rotate(' + (Degrees) + 'deg)', '-ms-transform': 'rotate(' + (Degrees) + 'deg)' });
           }
       }
       function updateKnobMove(e,e2) {

           if (isDown) {
              
               if (e2 === undefined) {
               e2=e
               }
           trace("updateKnob", e, e.pageX, window.pos.left, $(e2.currentTarget).width());
              // var pageCoords = "( " + (e.pageX - $(e.currentTarget).offset().left) + ", " + (e.pageY - $(e.currentTarget).offset().top) + " )";

              
              // var v1 = { x: 1, y: 0 }, v2 = { x: (e.pageX - $(e.currentTarget).offset().left) - $(e.currentTarget).width() / 2, y: (e.pageY - $(e.currentTarget).offset().top) - $(e.currentTarget).height() / 2 },
               // angleRad = Math.acos((v1.x * v2.x + v1.y * v2.y) / (Math.sqrt(v1.x * v1.x + v1.y * v1.y) * Math.sqrt(v2.x * v2.x + v2.y * v2.y))),
               // angleDeg = angleRad * 180 / Math.PI;
               angleDeg2 = Math.atan2(((e.pageX - window.pos.left) - $(e2.currentTarget).width() / 2), -((e.pageY - window.pos.top) - $(e2.currentTarget).height() / 2)) * (180 / Math.PI);
               if (angleDeg2 < 0) {
                   angleDeg2 += 360
               }
               var Degrees = parseInt(angleDeg2);
               rotateKnob(Degrees);

             
               var frame = parseInt(34 * Degrees / 360);
               trace("frame--->", Degrees, "*", frame, "*", frames.length);
           
           }



       }

       function updateKnobUp(e) {
           trace("updateKnobUp");
           isDown = false


       }
       function updateKnobDown(e) {
           isDown = true


       }
       function updateKnob() {



           var number = $("#noise-wheel .result-cw").text();

           var Degrees = parseInt(number);

           if ($.browser.msie && parseInt($.browser.version, 10) < 9) {

               $("#rotate").rotate({ angle: (Degrees) });

           } else {

               $("#rotate").css({ 'transform': 'rotate(' + (Degrees) + 'deg)', '-webkit-transform': 'rotate(' + (Degrees) + 'deg)', '-o-transform': 'rotate(' + (Degrees) + 'deg)', '-moz-transform': 'rotate(' + (Degrees) + 'deg)', '-ms-transform': 'rotate(' + (Degrees) + 'deg)' });
           }

       }
       /*  $(function () {

       $(".knob").knob({
                   
       draw: function () {
       $("#noise-wheel .result-cw").text(this.cv);
       updateKnob();
                       
       }
       });


       });*/
    </script>
   

    


<div id="example" >
       
        
        
        <div id="wheels" >
            
            

            <div id="noise-wheel" >
		<div class="result-cws" ></div>
		<div class="indicator-cw1" ><img src="img/metal_button_kurzor.png" id="rotate" class="indicator-cw-img unScrollable" alt="control wheel indicator" /></div>
		<div class="indicator-cw unScrollable" ></div>
            </div>
            
            
            
            
        </div> <!-- wheels end -->
        
    </div> <!-- example end -->

    <div id="Div1">
       
        
        
        <div id="Div2">
            
            

            <div id="Div3" >
		<div class="result-cw"></div>
		<div class="indicator-cw1" class="unScrollable"><img src="img/metal_button_kurzor.png" id="Img1" class="indicator-cw-img unScrollable" alt="control wheel indicator" /></div>
		
            </div>
            
            
            
            
        </div> <!-- wheels end -->
        
    </div> <!-- example end -->
     <div id="360frames" class="unScrollable"></div>
<script>
    $(window).load(function () {





        // Code is encrypted. Don't steal the code, buy it!





        /*  $('.info-tooltip').toggle(function () {
        $(this).css("background", "url(img/info_tooltip_hide.png)")
        $("#info").slideDown("slow");
        }, function () {
        $(this).css("background", "url(img/info_tooltip.png)")
        $("#info").slideUp("slow");
        });
        */



        $('#noise-wheel .indicator-cw').bind('touchmove', function (e) {
            // trace("touchmove---------------------", e.originalEvent.touches[0], e.touch)
            /* for (var i in e.originalEvent.touches[0]) {
            trace("touches[0]", i, ":", e.originalEvent.touches[0][i]);
            }*/
            // updateKnobMove(event.touches[0]);

            if (e.touches === undefined && e.originalEvent !== undefined) {
                // jQuery Event normalization does not preserve the 'event.touches'
                // try to grab touches from the original event
                e.touches = e.originalEvent.touches;

            }



            if (e.touches !== undefined && e.touches.length > 0) {
                //  trace("YEAH!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
                updateKnobMove(e.touches[0], e);
            } else {
                updateKnobMove(e);
            }

        });
        $('#noise-wheel .indicator-cw').bind('touchstart', function (event) {

            updateKnobDown();

        });
        $('#noise-wheel .indicator-cw').bind('touchend', function (event) {
            updateKnobUp();

        });

        window.pos = $('#noise-wheel').offset()
        trace("pos", window.pos.left, window.pos.top);



        $("#noise-wheel").mousemove(updateKnobMove);
        $(document).mouseup(updateKnobUp);
        $("#noise-wheel").mousedown(updateKnobDown);




        /**/




        //if ($.browser.msie && parseInt($.browser.version, 10) > 9) {
        trace("attach event");
        document.body.addEventListener('touchmove', function (e) {
            trace("touchmove catch all", $(e.target).hasClass("unScrollable"), $(e.target).context);
            /*for (var i in $(e.target).context) {
                trace("target", i, ":", $(e.target).context[i]);
            }*/
            if ($(e.target).hasClass("unScrollable")) {
                trace("hit!!!!!!!!!!!!!!!!");
                e.preventDefault();
            }
        });
        document.body.addEventListener('touchStart', function (e) {
            trace("touchstart catch all", $(e.target).hasClass("unScrollable"));
            if ($(e.target).hasClass("unScrollable")) {
                trace("hit!!!!!!!!!!!!!!!!");
                e.preventDefault();
            }
        });

        // }










    });
</script>
</body>
</html>
